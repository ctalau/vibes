<!DOCTYPE html>
<html lang="ro">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Semnătură Digitală</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="min-h-screen bg-gray-100 p-4">
<div class="max-w-4xl mx-auto bg-white rounded-lg shadow-lg">
  <div class="p-6 border-b border-gray-200">
    <h1 class="text-3xl font-bold text-gray-800 mb-2">Semnătură Digitală</h1>
    <p class="text-gray-600">Desenează semnătura ta și salvează-o ca imagine</p>
  </div>
  <div class="p-4 border-b border-gray-200 bg-gray-50">
    <div class="flex flex-wrap items-center gap-4">
      <div class="relative">
        <button id="color-btn" class="flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 20l9 2-7-7m0 0L3 11V9l7-7h2l7 7v2l-2 2m-5 0l7 7"></path></svg>
          <div id="color-swatch" class="w-6 h-6 rounded border-2 border-gray-300" style="background-color:#000000"></div>
          <span>Culoare</span>
        </button>
        <div id="color-picker-container" class="absolute top-12 left-0 z-10 p-3 bg-white border border-gray-300 rounded-lg shadow-lg hidden">
          <div class="grid grid-cols-3 gap-2">
            <button data-color="#000000" class="color-option w-8 h-8 rounded border-2" style="background:#000000"></button>
            <button data-color="#0066CC" class="color-option w-8 h-8 rounded border-2" style="background:#0066CC"></button>
            <button data-color="#FF0000" class="color-option w-8 h-8 rounded border-2" style="background:#FF0000"></button>
            <button data-color="#00AA00" class="color-option w-8 h-8 rounded border-2" style="background:#00AA00"></button>
            <button data-color="#FF6600" class="color-option w-8 h-8 rounded border-2" style="background:#FF6600"></button>
            <button data-color="#9900CC" class="color-option w-8 h-8 rounded border-2" style="background:#9900CC"></button>
          </div>
          <input id="custom-color" type="color" value="#000000" class="w-full mt-2 h-8 rounded">
        </div>
      </div>
      <div class="flex items-center gap-2">
        <label class="text-gray-700">Grosime:</label>
        <input id="size-range" type="range" min="1" max="10" value="3" class="w-20">
        <span id="size-display" class="text-gray-600 w-8">3px</span>
      </div>
      <button id="clear-btn" class="flex items-center gap-2 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 4H8l-7 7 7 7h13"/></svg>
        Șterge
      </button>
      <button id="save-btn" class="flex items-center gap-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v16h16V4H4zm12 4v4m0 4h-4m4 0H8"/></svg>
        Salvează
      </button>
      <button id="copy-btn" class="flex items-center gap-2 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16h8m-8-4h8m-7-4h7m-6-4h6M4 8h2m0 4h2m0 4h2m0 4h2"/></svg>
        Copiază
      </button>
    </div>
  </div>
  <div class="p-6">
    <div class="border-2 border-dashed border-gray-300 rounded-lg p-4 bg-white">
      <p class="text-center text-gray-500 mb-4">Desenează semnătura ta în spațiul de mai jos</p>
      <canvas id="signature-canvas" class="border border-gray-300 rounded cursor-crosshair mx-auto block touch-none w-full" width="800" height="400" style="max-width:100%;height:auto;"></canvas>
    </div>
  </div>
  <div class="p-6 border-t border-gray-200 bg-gray-50">
    <h3 class="font-semibold text-gray-800 mb-2">Instrucțiuni:</h3>
    <ul class="text-gray-600 space-y-1">
      <li>• Folosește mouse-ul sau touch pentru a desena pe canvas</li>
      <li>• Alege culoarea și grosimea liniei după preferință</li>
      <li>• Apasă "Șterge" pentru a începe din nou</li>
      <li>• Apasă "Salvează" pentru a descărca semnătura ca imagine PNG</li>
      <li>• Apasă "Copiază" pentru a copia imaginea ca text Base64</li>
    </ul>
  </div>
</div>
<script>
window.addEventListener('load', function(){
  const canvas = document.getElementById('signature-canvas');
  const context = canvas.getContext('2d');
  const dpr = window.devicePixelRatio || 1;
  const rect = canvas.getBoundingClientRect();
  canvas.style.width = rect.width + 'px';
  canvas.style.height = rect.height + 'px';
  canvas.width = rect.width * dpr;
  canvas.height = rect.height * dpr;
  context.scale(dpr, dpr);
  context.lineCap = 'round';
  context.lineJoin = 'round';
  context.fillStyle = 'white';
  context.fillRect(0,0, rect.width, rect.height);

  let isDrawing = false;
  let penColor = '#000000';
  let penSize = 3;

  function getCoordinates(e){
    const rect = canvas.getBoundingClientRect();
    const scaleX = canvas.width / rect.width;
    const scaleY = canvas.height / rect.height;
    const clientX = e.clientX !== undefined ? e.clientX : (e.touches && e.touches[0].clientX);
    const clientY = e.clientY !== undefined ? e.clientY : (e.touches && e.touches[0].clientY);
    return {
      x: (clientX - rect.left) * scaleX / (window.devicePixelRatio || 1),
      y: (clientY - rect.top) * scaleY / (window.devicePixelRatio || 1)
    };
  }

  function startDrawing(e){
    isDrawing = true;
    const coords = getCoordinates(e);
    context.beginPath();
    context.moveTo(coords.x, coords.y);
  }

  function draw(e){
    if(!isDrawing) return;
    e.preventDefault();
    const coords = getCoordinates(e);
    context.lineWidth = penSize;
    context.strokeStyle = penColor;
    context.lineTo(coords.x, coords.y);
    context.stroke();
  }

  function stopDrawing(){
    isDrawing = false;
  }

  canvas.addEventListener('mousedown', startDrawing);
  canvas.addEventListener('mousemove', draw);
  canvas.addEventListener('mouseup', stopDrawing);
  canvas.addEventListener('mouseleave', stopDrawing);
  canvas.addEventListener('touchstart', startDrawing);
  canvas.addEventListener('touchmove', draw);
  canvas.addEventListener('touchend', stopDrawing);

  document.getElementById('clear-btn').addEventListener('click', function(){
    context.fillStyle = 'white';
    context.fillRect(0,0, rect.width, rect.height);
  });

  document.getElementById('save-btn').addEventListener('click', function(){
    const link = document.createElement('a');
    link.download = 'semnatura_' + new Date().toISOString().slice(0,19).replace(/:/g,'-') + '.png';
    link.href = canvas.toDataURL('image/png');
    link.click();
  });

  document.getElementById('copy-btn').addEventListener('click', function(){
    const dataURL = canvas.toDataURL('image/png');
    navigator.clipboard.writeText(dataURL);
  });

  const colorBtn = document.getElementById('color-btn');
  const picker = document.getElementById('color-picker-container');
  const swatch = document.getElementById('color-swatch');
  colorBtn.addEventListener('click', function(){
    picker.classList.toggle('hidden');
  });
  document.querySelectorAll('.color-option').forEach(function(btn){
    btn.addEventListener('click', function(){
      penColor = this.dataset.color;
      swatch.style.backgroundColor = penColor;
      document.getElementById('custom-color').value = penColor;
      picker.classList.add('hidden');
    });
  });
  document.getElementById('custom-color').addEventListener('change', function(){
    penColor = this.value;
    swatch.style.backgroundColor = penColor;
  });

  const sizeRange = document.getElementById('size-range');
  const sizeDisplay = document.getElementById('size-display');
  sizeRange.addEventListener('input', function(){
    penSize = Number(this.value);
    sizeDisplay.textContent = penSize + 'px';
  });
});
</script>
</body>
</html>
